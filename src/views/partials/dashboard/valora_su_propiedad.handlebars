
    <!-- Left Panel -->
    {{> "dashboard/componentes/aside" }}
    <!-- /#left-panel -->

    <!-- Right Panel -->
    <div id="right-panel" class="right-panel">

        <!-- Header-->
        {{> "dashboard/componentes/header" }}
        <!-- /#header -->

        <div class="modal fade" id="staticModal" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" style="display: none;" aria-hidden="true">
                <div class="modal-dialog modal-sm" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="staticModalLabel">Eliminar valoracionh5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">X</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <p>
                              
                           </p>
                       </div>
                       <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                        <form style="display: inline;" action="/admin-ibizapropiedades-dashboard/eliminar-usuario/" method="post">
                            <button type="submit" class="btn btn-primary">Aceptar</a>
                        </form>
                        
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Content -->
        <div class="breadcrumbs">
            {{#if usuarioEliminado}}
            <div style="text-align: center;" id="success-alertt" class="alert alert-success" role="alert">
            {{usuarioEliminado}}
            </div>

            <script>
                console.log("fuera del script")
                document.addEventListener("DOMContentLoaded", function() {
                        // Seleccionar el elemento del alerta
                        console.log("dentro del script")
                        var successAlert = document.getElementById("success-alertt");
                        console.log("despues de la variable del script")
                        // Esperar 3000 milisegundos (3 segundos) y luego ocultar el alerta
                        setTimeout(function() {
                            console.log("dentro de los segundo del script")
                            console.log(successAlert)
                            if (successAlert) {
                                console.log("IF")
                                successAlert.style.display = "none";
                            }
                        }, 2000);
                    });
            </script>
            {{/if}}        


            <div class="breadcrumbs-inner">
                <div class="row m-0">
                    <div class="col-sm-4">
                        <div class="page-header float-left">
                            <div class="page-title">
                                <h1>Valorar propiedades</h1>
                            </div>
                        </div>
                    </div>
{{!--                     <div class="col-sm-8">
                        <div class="page-header float-right">
                            <div class="page-title">
                                <ol class="breadcrumb text-right">
                                    <li><a href="#">admin-ibizapropiedades-dashboard</a></li>
                                    <li><a href="#">usuarios</a></li>
                                </ol>
                            </div>
                        </div>
                    </div> --}}
                </div>
            </div>
        </div>
        <br>
 

        <div class="content">

            <div class="animated fadeIn">
                <div class="row">

                {{#if valoraciones_propiedades}}
                {{#each valoraciones_propiedades}}
                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-header">
                                <h4>Propiedad a valorar<span class="badge badge-success float-right">Hace {{formatDate createdAt}}</span></h4>
                            </div>
                            <div class="card-body">
                                <ul class="nav nav-pills mb-3" id="pills-tab-{{id}}" role="tablist">
                                    <li style=" margin-left: 5px; padding: 4px;" class="nav-item">
                                        <a class="nav-link active show" id="ubicacion-tab-{{id}}" data-toggle="pill" href="#ubicacion-{{id}}" role="tab" aria-controls="ubicacion-{{id}}" aria-selected="false">Ubicación</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="propiedad-tab-{{id}}" data-toggle="pill" href="#propiedad-{{id}}" role="tab" aria-controls="propiedad-{{id}}" aria-selected="false">Propiedad</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="informacion-tab-{{id}}" data-toggle="pill" href="#informacion-{{id}}" role="tab" aria-controls="informacion-{{id}}" aria-selected="true">Información</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link " id="contacto-tab-{{id}}" data-toggle="pill" href="#contacto-{{id}}" role="tab" aria-controls="contacto-{{id}}" aria-selected="true">Contacto</a>
                                    </li>
                                </ul>

                                <div class="tab-content" id="pills-tabContent-{{id}}">
                                    <div class="tab-pane fade active show" id="ubicacion-{{id}}" role="tabpanel" aria-labelledby="ubicacion-tab-{{id}}">
                                        <div class="form-group has-success">
                                            <label for="ubicacion" class="control-label mb-1">Ubicación de la propiedad</label>
                                            <input disabled value="{{ubicacion}}" id="ubicacion" name="ubicacion" type="text" class="form-control cc-name valid" data-val="true" data-val-required="" autocomplete="cc-name" aria-required="true" aria-invalid="false" aria-describedby="ubicacion">
                                        </div>
                                        <div class="form-group">
                                            <label for="numero-casa" class="control-label mb-1">Número de casa</label>
                                            <input id="numero-casa" name="numero-casa" type="number" class="form-control cc-number identified visa" value="{{numeroCasa}}" disabled>
                                            <span class="help-block" data-valmsg-for="numero-casa" data-valmsg-replace="true"></span>
                                        </div>
                                        <form action="#" method="post" novalidate="novalidate"></form>
                                        <br>
                                        <br>
                                        <div>
                                            <button id="eliminar-valoracion" type="submit" class="btn btn-lg btn-info btn-block">
                                                <span id="eliminar-valoracion-amount">Eliminar la valoración</span>
                                            </button>
                                        </div>
                                        </form>
                                    </div>

                                    <div class="tab-pane fade" id="propiedad-{{id}}" role="tabpanel" aria-labelledby="propiedad-tab-{{id}}">
                                        <div class="card-body card-block">
                                            <div class="form-group"><label for="tipo-propiedad" class=" form-control-label">Tipo de propiedad</label><input type="text" id="tipo-propiedad" value="{{tipoPropiedad}}" disabled class="form-control"></div>
                                            <div class="form-group"><label for="planta-apartamento" class=" form-control-label">Planta del apartamento</label><input type="text" id="planta-apartamento" disabled class="form-control" value="{{plantaApartamento}}"></div>
                                            <div class="form-group"><label for="puerta-bloque" class=" form-control-label">Puerta / Bloque (opcional)</label><input type="text" id="puerta-bloque" disabled value="{{puertaBloque}}" class="form-control"></div>
                                            <div class="form-group"><label for="superficie-construida" class=" form-control-label">Superficie construida</label><input type="text" id="superficie-construida" value="{{superficieConstruidaApartamento}}" disabled class="form-control"></div>
                                            <div class="form-group"><label for="superficie-construida" class=" form-control-label">Area del terreno</label><input type="text" id="superficie-construida" value="{{areaTerreno}}" disabled class="form-control"></div>                                            
                                        </div>
                                    </div>

                                    <div class="tab-pane fade" id="informacion-{{id}}" role="tabpanel" aria-labelledby="informacion-tab-{{id}}">
                                        <div class="card-body card-block">
                                            <div class="form-group"><label for="num-habitaciones" class=" form-control-label">Número de habitaciones</label><input type="text" id="num-habitaciones" value="{{numHabitaciones}}" disabled class="form-control"></div>
                                            <div class="form-group"><label for="num-banos" class=" form-control-label">Número de baños</label><input type="text" id="num-banos" disabled class="form-control" value="{{numBanios}}"></div>
                                            <div class="form-group"><label for="estado-propiedad" class=" form-control-label">Estado de la propiedad</label><input type="text" id="estado-propiedad" disabled value="{{EstadoPropiedad}}" class="form-control"></div>
                                            {{#each caracteristica}}
                                            {{#if (eqq this "Piscina")}}
                                                {{this}}
                                            {{/if}}
                                            {{/each}}
                                            <div class="signup-field">
                                                <div class="signup-label">Características 
                                                     
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input disabled class="form-check-input" type="checkbox" id="piscina" name="caracteristica"
                                                    {{#each caracteristica}}
                                                    {{#if (eqq this "Piscina")}}
                                                        checked
                                                    {{/if}}
                                                    {{/each}}                                                     
                                                     value="Piscina">
                                                    <label class="form-check-label" for="piscina">Piscina</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input disabled class="form-check-input" type="checkbox" id="terraza" name="caracteristica"
                                                    {{#each caracteristica}}
                                                    {{#if (eqq this "Terraza")}}
                                                        checked
                                                    {{/if}}
                                                    {{/each}} 
                                                     value="Terraza">
                                                    <label class="form-check-label" for="terraza">Terraza</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input disabled class="form-check-input" type="checkbox" id="garaje" name="caracteristica" 
                                                    
                                                    {{#each caracteristica}}
                                                    {{#if (eqq this "Garaje")}}
                                                        checked
                                                    {{/if}}
                                                    {{/each}} 
                                                     value="Garaje">
                                                    <label class="form-check-label" for="garaje">Garaje</label>
                                                </div>
                                            </div>
                                            
                                        </div>
                                    </div>

                                    <div class="tab-pane fade" id="contacto-{{id}}" role="tabpanel" aria-labelledby="contacto-tab-{{id}}">
                                        <div class="form-row">
                                            <div class="form-group col-md-6">
                                                <label for="nombre">Nombre</label>
                                                <input disabled type="email" class="form-control" id="nombre" placeholder="{{nombre}}">
                                            </div>
                                            <div class="form-group col-md-6">
                                                <label for="apellido">Apellido</label>
                                                <input disabled type="text" class="form-control" id="apellido" placeholder="{{Apellidos}}">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="correo">Correo</label>
                                            <input disabled type="text" class="form-control" id="correo" placeholder="{{correo}}">
                                        </div>
                                        <div class="form-group">
                                            <label for="telefono">Telefono</label>
                                            <input disabled type="text" class="form-control" id="telefono" placeholder="{{telefono}}">
                                        </div>

                                        <div class="signup-field">
                                            <div class="signup-label">Contactarle</div>
                                            <div class="form-check form-check-inline">
                                                <input disabled class="form-check-input" type="checkbox" id="manana" value="Manana" 
                                                    {{#each contactar}}
                                                    {{#if (eqq this "Mañana")}}
                                                        checked
                                                    {{/if}}
                                                    {{/each}} 

                                                 name="Manana">
                                                <label class="form-check-label" for="manana">Mañana</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input disabled class="form-check-input" type="checkbox" name="tarde" id="tarde"
                                                    {{#each contactar}}
                                                    {{#if (eqq this "Tarde")}}
                                                        checked
                                                    {{/if}}
                                                    {{/each}}
                                                 value="Tarde">
                                                <label class="form-check-label" for="tarde">Tarde</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input disabled class="form-check-input" type="checkbox" id="noche" name="Noche"
                                                    {{#each contactar}}
                                                    {{#if (eqq this "Noche")}}
                                                        checked
                                                    {{/if}}
                                                    {{/each}}
                                                 value="Noche">
                                                <label class="form-check-label" for="noche">Noche</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                {{/each}}
                {{else}}
                {{/if}}
                    

                </div>
            </div><!-- .animated -->
        </div>

        <div class="clearfix"></div>



        <!-- /.content -->

        {{> "dashboard/componentes/footer" }}

    </div>
 

{{> "dashboard/componentes/scripts" }}

<script>
    // Función que se ejecuta cuando el modal se muestra
    function editarModal(id, usuario) {
        // Obtener el enlace "Aceptar"
        var btnAceptar = document.querySelector("#staticModal .modal-footer a.btn-primary");
        

        // Verificar si el enlace "Aceptar" existe
        if (btnAceptar) {
            // Cambiar la dirección (href) del enlace "Aceptar"
            btnAceptar.href = `/admin-ibizapropiedades-dashboard/eliminar-usuario/${id}`;
        }

        // Cambiar el contenido del modal
        var modalBody = document.querySelector("#staticModal .modal-body p");

        // Verificar si el elemento del modal existe
        if (modalBody) {
            modalBody.innerHTML = `
                            <p>
                               Estás a punto de eliminar el usuario <span style="color: red; text-transform: uppercase;">${usuario}</span>. Esta acción es irreversible y eliminará todos los datos asociados a su cuenta. Por favor, asegúrate de que realmente deseas proceder con la eliminación.
                            </p>
            `;
        }

                // Obtener el formulario dentro del modal
        var form = document.querySelector("#staticModal form");

        // Verificar si el enlace "Aceptar" y el formulario existen
        if (form) {
            // Cambiar el action del formulario
            form.action = `/admin-ibizapropiedades-dashboard/eliminar-usuario/${id}`;
        }
    }

    // Escuchar el evento 'shown.bs.modal' del modal
    document.getElementById("staticModal").addEventListener("shown.bs.modal", function() {
        // Puedes llamar a la función editarModal con los parámetros deseados aquí si es necesario
    });
</script>

{{> "dashboard/componentes/scripts_socket" }}